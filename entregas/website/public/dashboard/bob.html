<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyclus | Suporte</title>
    <link rel="stylesheet" href="../css/styleBob.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/slide.css">

    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">

    <script src="../js/sessao.js"></script>
    <script src="./../js/slide.js"></script>

    <!-- Ícone da página -->
    <link rel="shortcut icon" type="imagex/png" href="../assets/logo-p-cyclus.png">

</head>

<body>
    <header class="slide">
        <span id="b_usuario"></span>
        <ul class="slide-header">
            <li class="slide-header-item">
                <a id="dash_slide" onclick="dashboard_slide()" href="./dashboard.html"><img
                        src="../assets/icon/dashboard_white.png">Dashboard</a>
            </li>
            <li class="slide-header-item">
                <a id="bob_slide" onclick="bobia_slide()" href="bob.html"><img src="../assets/icon/chat.svg">Chat</a>
            </li>
            <li class="slide-header-item">
                <a id="sair_slide" onclick="limparSessao()"><img src="../assets/icon/sair.svg">Sair</a>
            </li>
        </ul>
        <img class="cyclus_logo" src="../assets/cyclus.png">
    </header>

    <section class="dash dash-text">
        <div class="dash-divs">
            <div class="container" id="container">
                <div class="sub-container1">
                    <h1>Suporte Cyclus</h1>
                    <p>Olá, sou o BobIA, assistente virtual da Cyclus.</p>
                </div>

                <div class="sub-container2">
                    <div class="dash-kpis-item">
                        <br>
                        <h2>No que precisa de ajuda?</h1>
                            <div class="text">
                                <textarea class="textarea" id="pergunta" type="text"
                                    placeholder="Digite a pergunta..."></textarea>
                            </div>
                            <br><br>
                            <button class="botao" onclick="gerarResposta()">Gerar Resposta</button>

                    </div>
                    <div class="dash-kpis-item" id="id_resposta">
                        <br>
                        <h2>Resposta:</h2>
                        <div class="text" id="resposta"></div>
                    </div>
                </div>

            </div>
        </div>
    </section>

</body>

<script>

    b_usuario.innerHTML = sessionStorage.NOME_USUARIO;

    window.onload = function () {
        bobia_slide();
    }

    async function gerarResposta() {
        const pergunta = document.getElementById('pergunta').value;

        const response = await fetch('/perguntar', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ pergunta })
        });

        const data = await response.json();

        resposta.style.display = 'block';
        document.getElementById('resposta').innerText = data.resultado;
    }

</script>

</html>